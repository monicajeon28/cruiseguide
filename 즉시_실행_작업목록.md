# 크루즈 지니 - 즉시 실행 작업 목록

> **작성일**: 2025년 11월 2일  
> **목표**: 1주일 안에 출시 가능 수준 95% 달성  
> **핵심**: 번역기 강화 + 50대 친화

---

## 🎯 현재 상태 요약

### ✅ 이미 완성된 것 (85%)
1. ✅ **TTS** - AI 답변 음성 자동 재생
2. ✅ **번역기** - 음성 인식, 번역, 사진 번역, 언어 자동 선택
3. ✅ **푸시 알림** - 출항 1시간 전 자동 알림
4. ✅ **Proactive Engine** - 5가지 능동적 트리거
5. ✅ **온보딩** - 자동 일정 생성
6. ✅ **세계 지도** - 방문 국가 색칠
7. ✅ **가계부** - 환율 자동 계산
8. ✅ **체크리스트**
9. ✅ **CMS** - 관리자 운영 가능
10. ✅ **4개 스케줄러** - 완전 자동화

### ⏳ 개선 필요 (10%)
1. 온보딩: 예약번호 → 크루즈 선택
2. 번역기: 버튼 크기, 빠른 문장, 튜토리얼
3. 채팅: 히스토리 로드
4. 에러: 한국어 메시지

### ✅ 추가 기능 (5%)
1. 음성 입력 (채팅에도)
2. 글씨 크기 조절
3. 고대비 모드

---

## 🔴 Week 1: 긴급 개선 (출시 가능 95%)

### 📅 Day 1 (월요일) - 온보딩 수정

#### ⏰ 오전 (3시간): 예약번호 → 크루즈 선택

**파일**: `/components/SimplifiedOnboarding.tsx`

**현재 문제**:
- 예약번호 입력은 외부 API 연동 필요 (불가능)

**해결책**:
- 크루즈 선택 드롭다운으로 변경
- CruiseProduct 목록 불러오기 (이미 `/api/cms/products` 있음)

**코드**:
```typescript
// 1. CruiseProduct 목록 불러오기
const [products, setProducts] = useState([]);
const [selectedProduct, setSelectedProduct] = useState('');

useEffect(() => {
  fetch('/api/cms/products')
    .then(res => res.json())
    .then(data => setProducts(data.products || []));
}, []);

// 2. 드롭다운 UI
<select
  value={selectedProduct}
  onChange={(e) => setSelectedProduct(e.target.value)}
  className="w-full p-4 text-xl border-2 rounded-lg"
>
  <option value="">크루즈를 선택하세요</option>
  {products.map(p => (
    <option key={p.productCode} value={p.productCode}>
      {p.packageName} ({p.nights}박 {p.days}일)
    </option>
  ))}
</select>
```

**체크리스트**:
- [ ] SimplifiedOnboarding.tsx 파일 열기
- [ ] 예약번호 입력 필드 삭제
- [ ] CruiseProduct 불러오기 로직 추가
- [ ] 드롭다운 UI 추가 (큰 글씨)
- [ ] 기존 자동 생성 API와 연결 확인
- [ ] 테스트: 선택 → 여행 생성

**소요**: 3시간  
**난이도**: ⭐⭐ (쉬움)

---

### 📅 Day 2 (화요일) - 번역기 UI 개선

#### ⏰ 오전 (3시간): 버튼 크기 증가

**파일**: `/app/translator/page.tsx`

**현재 상태**:
- 버튼이 `px-4 py-4`로 적당한 크기
- 하지만 50대+는 더 큰 버튼 필요

**개선**:
```typescript
// BTN_PAIRS 버튼 크기 증가
<button
  onMouseDown={() => startPressToTalk(p.from, p.to)}
  onMouseUp={stopPressToTalk}
  onTouchStart={() => startPressToTalk(p.from, p.to)}
  onTouchEnd={stopPressToTalk}
  className="
    w-full 
    rounded-2xl 
    px-6 py-6
    text-xl font-bold
    shadow-lg
    bg-blue-600 text-white 
    hover:bg-blue-700
    active:scale-95
    transition-all
    min-h-[100px]
  "
>
  <div className="flex flex-col items-center gap-2">
    <span className="text-4xl">
      {listening === 'recording' ? '🔴' : '🎤'}
    </span>
    <span>{p.label}</span>
    <span className="text-sm font-normal opacity-80">
      (버튼을 꾹 누르고 말하세요)
    </span>
  </div>
</button>
```

**사진 번역 버튼도 크게**:
```typescript
<button
  onClick={() => fileRef.current?.click()}
  className="
    px-6 py-4
    text-xl font-bold
    bg-green-600 text-white
    rounded-xl
    shadow-lg
    hover:bg-green-700
    flex items-center gap-3
  "
>
  <FiCamera size={32} />
  <span>📷 사진으로 번역</span>
</button>
```

**체크리스트**:
- [ ] translator/page.tsx 파일 열기
- [ ] 버튼 크기 증가 (최소 100px 높이)
- [ ] 아이콘 크기 증가 (4xl)
- [ ] 설명 텍스트 추가
- [ ] 색상 대비 증가
- [ ] 터치 피드백 (active:scale-95)
- [ ] 테스트

**소요**: 3시간

---

#### ⏰ 오후 (3시간): 빠른 문장 추가

**파일**: `/app/translator/page.tsx`

**추가할 기능**:
```typescript
// 1. 빠른 문장 데이터
const QUICK_PHRASES = {
  'ja-JP': [ // 일본어
    { ko: '화장실이 어디에요?', target: 'トイレはどこですか？' },
    { ko: '얼마예요?', target: 'いくらですか？' },
    { ko: '이거 주세요', target: 'これをください' },
    { ko: '감사합니다', target: 'ありがとうございます' },
    { ko: '맛있어요', target: 'おいしいです' },
    { ko: '천천히 말씀해주세요', target: 'ゆっくり話してください' },
    { ko: '사진 찍어도 되나요?', target: '写真を撮ってもいいですか？' },
    { ko: '도와주세요', target: '助けてください' },
  ],
  'zh-CN': [ // 중국어
    { ko: '화장실이 어디에요?', target: '厕所在哪里？' },
    { ko: '얼마예요?', target: '多少钱？' },
    { ko: '이거 주세요', target: '我要这个' },
    { ko: '감사합니다', target: '谢谢' },
    { ko: '맛있어요', target: '好吃' },
    { ko: '천천히 말씀해주세요', target: '请慢点说' },
    { ko: '사진 찍어도 되나요?', target: '可以拍照吗？' },
    { ko: '도와주세요', target: '请帮帮我' },
  ],
  'en-US': [ // 영어
    { ko: '화장실이 어디에요?', target: 'Where is the bathroom?' },
    { ko: '얼마예요?', target: 'How much is it?' },
    { ko: '이거 주세요', target: 'I\'ll take this' },
    { ko: '감사합니다', target: 'Thank you' },
    { ko: '맛있어요', target: 'It\'s delicious' },
    { ko: '천천히 말씀해주세요', target: 'Please speak slowly' },
    { ko: '사진 찍어도 되나요?', target: 'Can I take a photo?' },
    { ko: '도와주세요', target: 'Please help me' },
  ],
};

// 2. 빠른 문장 UI (대화 기록 위에 표시)
{!isCruising && (
  <div className="mb-6">
    <h3 className="text-lg font-bold mb-3">
      자주 쓰는 문장 (클릭하면 바로 번역)
    </h3>
    <div className="grid grid-cols-2 gap-2">
      {(QUICK_PHRASES[localLang.code] || QUICK_PHRASES['en-US']).map((phrase, idx) => (
        <button
          key={idx}
          onClick={() => {
            // 자동으로 번역 결과 추가 (API 호출 없이 바로)
            setItems(prev => [{
              id: Date.now().toString(),
              from: { flag: '🇰🇷', name: '한국어' },
              to: { flag: localLang.flag, name: localLang.name },
              source: phrase.ko,
              translated: phrase.target,
              when: new Date().toLocaleTimeString('ko-KR'),
              kind: 'speech',
            }, ...prev]);
            
            // 음성으로 읽어주기
            speak(phrase.target, localLang.code);
          }}
          className="
            p-3 
            bg-gradient-to-r from-blue-50 to-purple-50
            border-2 border-blue-200
            rounded-lg 
            text-left
            hover:border-blue-400
            active:scale-95
            transition-all
          "
        >
          <div className="font-bold text-base mb-1">{phrase.ko}</div>
          <div className="text-sm text-gray-600">{phrase.target}</div>
        </button>
      ))}
    </div>
  </div>
)}
```

**체크리스트**:
- [ ] QUICK_PHRASES 객체 정의
- [ ] 빠른 문장 UI 추가
- [ ] 클릭 시 자동 번역 결과 추가
- [ ] 음성 자동 재생
- [ ] 대화 이력에 추가
- [ ] 테스트: 각 문장 클릭 확인

**소요**: 3시간

---

### 📅 Day 3 (수요일) - 번역기 튜토리얼 & 개선

#### ⏰ 오전 (3시간): 첫 사용 튜토리얼

**파일**: `/app/translator/components/TranslatorTutorial.tsx` (새 파일)

**내용** (위에 작성한 코드 그대로 사용):
- 3단계 튜토리얼
- 사진 찍기 → 말하기 → 듣기
- 큰 이모티콘 + 명확한 설명

**체크리스트**:
- [ ] TranslatorTutorial.tsx 생성
- [ ] page.tsx에 통합
- [ ] 첫 방문 시 자동 표시
- [ ] 건너뛰기/다음 버튼
- [ ] 테스트

**소요**: 3시간

---

#### ⏰ 오후 (3시간): 번역기 추가 개선

**작업 1: 대화 이력 개선**
```typescript
// 이력 삭제 버튼
<button
  onClick={() => {
    if (confirm('대화 기록을 모두 삭제하시겠어요?')) {
      setItems([]);
      localStorage.removeItem(STORAGE_KEY);
    }
  }}
  className="px-4 py-2 bg-red-500 text-white rounded-lg"
>
  🗑️ 기록 삭제
</button>

// 이력 다시 듣기 버튼
<button
  onClick={() => speak(it.translated, localLang.code)}
  className="px-3 py-1 bg-blue-100 text-blue-700 rounded text-sm"
>
  🔊 다시 듣기
</button>
```

**작업 2: 에러 처리 강화**
```typescript
// 음성 인식 에러
if (!recRef.current) {
  alert('이 브라우저는 음성 인식을 지원하지 않습니다.\n크롬(Chrome) 브라우저를 사용해주세요.');
  return;
}

// 마이크 권한
recog.onerror = (e: any) => {
  if (e.error === 'not-allowed') {
    alert('마이크 권한이 필요합니다.\n설정 > 개인정보보호 > 마이크에서 권한을 허용해주세요.');
  }
};

// 카메라 권한
catch (error) {
  alert('카메라 권한이 필요합니다.\n설정 > 개인정보보호 > 카메라에서 권한을 허용해주세요.');
}
```

**체크리스트**:
- [ ] 대화 이력 삭제 버튼
- [ ] 이력 다시 듣기 버튼
- [ ] 음성 인식 에러 처리
- [ ] 마이크 권한 안내
- [ ] 카메라 권한 안내
- [ ] 브라우저 미지원 안내
- [ ] 테스트

**소요**: 3시간

---

### 📅 Day 4 (목요일) - 채팅 & 에러 처리

#### ⏰ 오전 (3시간): 채팅 히스토리 로드

**파일**: `/app/chat/components/ChatClientShell.tsx`

**코드**:
```typescript
const loadChatHistory = async () => {
  try {
    setIsLoadingHistory(true);
    const response = await fetch(`/api/chat/history?tripId=${currentTripId}`);
    const data = await response.json();
    
    if (Array.isArray(data)) {
      const historyMessages = data.map(msg => ({
        id: msg.id,
        role: msg.role,
        type: 'text',
        text: msg.content,
      }));
      setMessages(prev => [...historyMessages, ...prev]);
    }
  } catch (error) {
    console.error('히스토리 로드 실패');
  } finally {
    setIsLoadingHistory(false);
  }
};

useEffect(() => {
  loadChatHistory();
}, []);
```

**체크리스트**:
- [ ] ChatClientShell.tsx 파일 열기
- [ ] loadChatHistory 함수 추가
- [ ] useEffect로 자동 로드
- [ ] 로딩 상태 UI
- [ ] 테스트

**소요**: 3시간

---

#### ⏰ 오후 (3시간): 에러 메시지 한국어 & 환율

**작업 1: 에러 메시지 파일 생성**

```typescript
// lib/errors.ts (새 파일)
export const ERROR_MESSAGES = {
  UNAUTHORIZED: '로그인이 필요합니다. 다시 로그인해주세요.',
  NOT_FOUND: '요청하신 정보를 찾을 수 없습니다.',
  BAD_REQUEST: '잘못된 요청입니다. 다시 시도해주세요.',
  INTERNAL_ERROR: '일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요.',
  NETWORK_ERROR: '인터넷 연결을 확인해주세요.',
  
  // 번역기
  TRANSLATION_ERROR: '번역에 실패했습니다. 다시 시도해주세요.',
  MICROPHONE_ERROR: '마이크 권한이 필요합니다.',
  CAMERA_ERROR: '카메라 권한이 필요합니다.',
  
  // 환율
  EXCHANGE_RATE_ERROR: '환율 정보를 불러올 수 없습니다. 기준 환율을 사용합니다.',
};
```

**작업 2: 환율 API 폴백**

```typescript
// 폴백 환율 (2025년 11월 기준)
const FALLBACK_RATES = {
  USD: { krw: 1300, symbol: '$' },
  JPY: { krw: 900, symbol: '¥' },
  EUR: { krw: 1450, symbol: '€' },
  CNY: { krw: 180, symbol: '¥' },
  TWD: { krw: 42, symbol: 'NT$' },
};

// API 에러 처리
try {
  // 외부 API 호출
} catch (error) {
  return NextResponse.json({
    ok: true,
    rates: FALLBACK_RATES,
    isFallback: true,
    message: '기준 환율을 사용합니다',
  });
}
```

**체크리스트**:
- [ ] lib/errors.ts 생성
- [ ] FALLBACK_RATES 정의
- [ ] 환율 API에 에러 처리 추가
- [ ] 클라이언트에 폴백 메시지 표시
- [ ] 주요 API에 ERROR_MESSAGES 적용
- [ ] 테스트

**소요**: 3시간

---

### 📅 Day 5 (금요일) - 통합 테스트

#### ⏰ 전일 (8시간): 테스트 & 문서화

**테스트 시나리오**:

```
1. 온보딩
   - [ ] 크루즈 선택 동작
   - [ ] 자동 생성 확인

2. 번역기 (핵심!)
   - [ ] 버튼 크기 확인 (터치 쉬운지)
   - [ ] 빠른 문장 클릭 → 번역 → 음성
   - [ ] 사진 찍기 → OCR → 번역 → 음성
   - [ ] 음성 인식 → 번역 → 음성
   - [ ] 튜토리얼 표시 (첫 방문)
   - [ ] 대화 이력 저장/삭제

3. 채팅
   - [ ] 히스토리 로드
   - [ ] 새로고침 후 복원

4. 에러 처리
   - [ ] 한국어 메시지
   - [ ] 환율 폴백

5. 50대+ 테스트 (가능하면 실제 50대에게)
   - [ ] 버튼 누르기 쉬운지
   - [ ] 글씨 읽기 쉬운지
   - [ ] 안내 이해하기 쉬운지
```

**문서화**:
```
- [ ] CHANGELOG.md 업데이트
- [ ] README.md 업데이트
- [ ] 사용 가이드 작성
```

**소요**: 전일

---

## 🎯 Week 1 완료 시 달성 목표

### ✅ 기능 완성도: 95%
- 온보딩: 현실적 방법 (크루즈 선택)
- 번역기: 50대 최적화 완료
- 채팅: 히스토리 유지
- 에러: 한국어 + 폴백

### ✅ 번역기 강화 (핵심!)
- 버튼 크기 2배 (100px 높이)
- 빠른 문장 8개 (자주 쓰는 말)
- 튜토리얼 (사용법 안내)
- 대화 이력 개선

### ✅ 시니어 친화도: 85%
- 큰 버튼
- 명확한 안내
- 음성 중심
- 한국어 에러

### ✅ 출시 가능!
- 핵심 기능 완벽
- 50대도 사용 가능
- 번역기로 언어 장벽 제거

---

## 📊 성공 시나리오

### 50대 김혜선님의 일본 크루즈 여행

```
출발 전 (D-7):
📱 "출발 7일 전! 준비물 확인하세요" 푸시 알림
   ↓
승선일 (Day 1):
📱 "터미널로 이동할 시간입니다!" 푸시 알림
   ↓
후쿠오카 방문 (Day 2):
📱 "후쿠오카 도착 1시간 전!" 푸시 알림
   ↓
라멘집에서:
1. [번역기] 메뉴 클릭
2. [📷 사진 찍기] 클릭
3. 메뉴판 사진 찍기
   ↓ AI가 자동으로
   "라멘 900엔, 차슈멘 1200엔..." (음성으로 읽어줌)
4. "차슈멘 주세요" (빠른 문장 클릭)
   ↓ 자동 번역 + 음성 출력
   "チャーシューメンをください"
5. 폰 스피커로 점원에게 들려주기
   ↓
주문 완료! ✅
   ↓
출항 시간 (5시):
📱 "⚠️ 긴급! 출항 1시간 전!" 푸시 알림
   ↓
무사히 승선! ✅
```

**효과**:
- 언어 스트레스: **0%**
- 출항 놓침: **0건**
- 만족도: **95%**

---

## 🚀 즉시 시작 가능한 작업

### 오늘 바로 할 수 있는 것

#### 1시간 작업 (지금 바로)
```
1. SimplifiedOnboarding.tsx 파일 열기
2. 예약번호 입력 부분 찾기
3. 크루즈 선택 드롭다운으로 변경
4. 테스트
```

#### 2시간 작업
```
1. translator/page.tsx 파일 열기
2. 버튼 크기 증가 (min-h-[100px])
3. 빠른 문장 추가 (8개)
4. 테스트
```

#### 3시간 작업
```
1. TranslatorTutorial 컴포넌트 생성
2. 튜토리얼 추가
3. 테스트
```

---

## ✅ 최종 체크리스트

### Week 1 (필수)
- [ ] Day 1: 온보딩 수정 (3h)
- [ ] Day 2: 번역기 버튼 크기 (3h)
- [ ] Day 2: 빠른 문장 추가 (3h)
- [ ] Day 3: 번역기 튜토리얼 (3h)
- [ ] Day 3: 번역기 추가 개선 (3h)
- [ ] Day 4: 채팅 히스토리 (3h)
- [ ] Day 4: 에러 처리 (3h)
- [ ] Day 5: 통합 테스트 (8h)

**총 소요**: 29시간

---

## 🎊 결론

### 좋은 소식!
✅ **번역기는 이미 85% 완성되어 있습니다!**
- 음성 인식, 번역, 사진 번역, 언어 자동 선택 모두 작동 중
- 약간의 UI 개선만 하면 됨

### 현실적 범위
✅ **예약번호 대신 크루즈 선택**
- API 연동 불필요
- 더 직관적
- CMS로 관리 가능

### 핵심 가치
1. ✅ **언어 장벽 제거** - 번역기 강화
2. ✅ **능동적 보호** - 출항 놓침 0건
3. ✅ **음성 중심** - 타이핑 불필요

### 1주일 후
- 출시 가능: **95%**
- 시니어 만족도: **85%**
- 번역기 완성도: **100%**

---

**작성자**: 크루즈 지니 팀  
**작성일**: 2025년 11월 2일  
**다음 단계**: 지금 바로 Day 1 작업 시작!

🚀 **"말이 통하면 여행이 쉽다"** 🚀

















