# 고객 관리 탭 사용 가이드

## 📋 주요 기능

### 1. 검색 기능 🔍
- **검색 방법**: 상단 검색창에 입력
- **검색 대상**: 이름, 전화번호, 이메일
- **실시간 검색**: 입력 후 0.5초 후 자동 검색 (디바운스)
- **예시**:
  - 이름: "홍길동"
  - 전화번호: "010-1234-5678" 또는 "01012345678"
  - 이메일: "user@example.com"

### 2. 상태 필터 🎯
드롭다운에서 고객 상태를 선택하여 필터링할 수 있습니다:

- **전체**: 모든 고객 표시 (기본값)
- **활성**: 자유여행 예약 고객 (출발일에 자동 잠금)
- **패키지**: 패키지여행 예약 고객 (여행 종료 후 1일 후 자동 잠금)
- **동면**: 시험 사용 고객 (가입 후 48시간만 사용 가능)
- **잠금**: 로그인 불가 상태 (계정 잠금)

**상세 설명은 `고객상태_시스템_설명.md` 파일을 참고하세요.**

### 3. 정렬 기능 📊
다양한 기준으로 고객 목록을 정렬할 수 있습니다:

- **최신 가입순**: 최근에 가입한 고객부터 (기본값)
- **오래된 가입순**: 오래전에 가입한 고객부터
- **이름순 (가나다)**: 이름을 가나다순으로 정렬
- **이름순 (역순)**: 이름을 역순으로 정렬
- **여행 횟수 많은순**: 여행을 많이 한 고객부터
- **여행 횟수 적은순**: 여행을 적게 한 고객부터
- **최근 접속순**: 최근에 접속한 고객부터
- **오래된 접속순**: 오래전에 접속한 고객부터

### 4. 고객 정보 확인 📋
각 고객의 다음 정보를 확인할 수 있습니다:

- **ID**: 고객 고유 번호
- **이름**: 고객 이름
- **핸드폰**: 전화번호
- **가입일**: 회원가입 날짜
- **상태**: 활성/동면/잠금 상태 표시
  - 🟢 활성: 정상 사용 중
  - 🟡 동면: 장기간 미접속
  - 🔴 잠금: 계정 잠금 처리
- **여행 횟수**: 현재 여행 횟수 (회)
- **현재 여행 종료일**: 현재 진행 중인 여행의 종료 예정일
- **최근 여행**: 가장 최근 여행 정보
  - 크루즈 이름
  - 여행지 (목적지)

### 5. 관리 기능 ⚙️

#### 상세 보기 버튼 (초록색)
- 클릭 시 해당 고객의 상세 정보 페이지로 이동
- 상세 페이지에서 다음 기능 사용 가능:
  - 비밀번호 초기화
  - 계정 잠금/해제
  - 세션 목록 확인 및 강제 종료
  - 비밀번호 변경 이력 확인
  - 사용자 분석 데이터 확인

#### 새 여행 시작 버튼 (파란색)
- 고객의 새 여행을 시작할 때 사용
- 클릭 시:
  1. 여행 종료일 입력 팝업 표시 (YYYY-MM-DD 형식)
  2. 확인 후 다음 작업 수행:
     - 비밀번호를 3800으로 초기화
     - 여행 횟수 1 증가
     - 온보딩을 다시 진행하게 설정
     - 여행 종료일 설정

### 6. 페이지네이션 📄
- 한 페이지에 20명씩 표시
- 하단 페이지 번호 클릭으로 이동
- 이전/다음 버튼으로 페이지 이동
- 현재 표시 중인 고객 범위 표시 (예: "총 100명 중 1-20명 표시")

## 💡 사용 예시

### 예시 1: 특정 고객 찾기
1. 검색창에 고객 이름 또는 전화번호 입력
2. 검색 결과에서 고객 확인
3. "상세 보기" 버튼 클릭하여 상세 정보 확인

### 예시 2: 동면 고객 확인
1. 상태 필터에서 "동면" 선택
2. 동면 상태인 고객 목록만 표시됨
3. 필요시 "상세 보기"로 이동하여 추가 정보 확인

### 예시 3: 여행 많이 한 고객 확인
1. 정렬에서 "여행 횟수 많은순" 선택
2. 여행 횟수가 많은 고객부터 정렬되어 표시됨

### 예시 4: 고객에게 새 여행 시작
1. 고객 목록에서 해당 고객 찾기
2. "새 여행 시작" 버튼 클릭
3. 여행 종료일 입력 (예: 2024-12-31)
4. 확인 버튼 클릭
5. 비밀번호가 3800으로 초기화되고 새 여행 시작

## ⚠️ 주의사항

1. **새 여행 시작** 기능은 다음을 수행합니다:
   - 비밀번호 초기화 (3800)
   - 여행 횟수 증가
   - 온보딩 재설정
   - 신중하게 사용해야 합니다.

2. **검색은 대소문자를 구분하지 않습니다** (SQLite 제한)

3. **페이지당 20명씩 표시**되므로 많은 고객이 있을 경우 페이지네이션을 사용하세요.

4. **상태 필터와 정렬은 함께 사용**할 수 있습니다.

## 🔗 관련 기능

- 고객 상세 페이지 (`/admin/users/[userId]`)에서 더 많은 관리 기능 사용 가능:
  - 비밀번호 초기화
  - 계정 잠금/해제
  - 세션 관리
  - 사용자 분석 데이터

