# Phase 1 기능 테스트 가이드

> 작성일: 2025-11-04  
> 목적: Phase 1 구현 기능들의 통합 테스트

---

## 📋 테스트 체크리스트

### ✅ 1. CRM 메시지 시스템

#### 1-1. 관리자 메시지 발송 테스트
- [ ] 관리자 로그인 (`http://localhost:3030/admin/login`)
- [ ] 좌측 메뉴에서 "고객 메시지" 클릭
- [ ] "새 메시지 작성" 버튼 클릭
- [ ] 전체 고객 대상 메시지 발송:
  - 제목: "테스트 메시지"
  - 내용: "이것은 테스트 메시지입니다."
  - 메시지 타입: "정보"
  - 수신자: "전체 고객"
- [ ] "메시지 발송" 버튼 클릭
- [ ] 성공 메시지 확인
- [ ] 메시지 목록에 표시되는지 확인

#### 1-2. 특정 고객 메시지 발송 테스트
- [ ] "새 메시지 작성" 버튼 클릭
- [ ] "특정 고객" 선택
- [ ] 고객 ID 입력 (예: 1)
- [ ] 메시지 작성 및 발송
- [ ] 해당 고객에게만 발송되는지 확인

#### 1-3. 고객 페이지 팝업 확인
- [ ] 일반 사용자로 로그인 (`http://localhost:3030/login`)
- [ ] 채팅 페이지 접속
- [ ] 관리자가 발송한 메시지가 팝업으로 표시되는지 확인
- [ ] "확인" 버튼 클릭
- [ ] 다시 로그인해도 같은 메시지가 나타나지 않는지 확인

---

### ✅ 2. 관리자 로그인 링크

- [ ] 일반 로그인 페이지 접속 (`http://localhost:3030/login`)
- [ ] 페이지 하단에 "관리자 로그인" 링크가 보이는지 확인
- [ ] 링크 클릭 시 `/admin/login`으로 이동하는지 확인

---

### ✅ 3. 고객 관리 페이지 확장

#### 3-1. 고객 상세 페이지 접근
- [ ] 관리자 로그인
- [ ] "고객 관리" 메뉴 클릭
- [ ] 고객 목록에서 "상세 보기" 버튼 클릭
- [ ] 고객 상세 페이지가 열리는지 확인

#### 3-2. 비밀번호 초기화 테스트
- [ ] 고객 상세 페이지에서 "비밀번호 초기화" 섹션 확인
- [ ] 비밀번호 입력 (기본값: 3800)
- [ ] "초기화" 버튼 클릭
- [ ] 확인 메시지 표시 확인
- [ ] 비밀번호 변경 이력에 기록되는지 확인

#### 3-3. 계정 잠금/해제 테스트
- [ ] 고객 상세 페이지에서 "보안 관리" 섹션 확인
- [ ] "계정 잠금" 버튼 클릭
- [ ] 잠금 사유 입력
- [ ] 계정 상태가 "계정 잠금됨"으로 변경되는지 확인
- [ ] "잠금 해제" 버튼 클릭
- [ ] 계정 상태가 "계정 정상"으로 변경되는지 확인

#### 3-4. 세션 관리 테스트
- [ ] 고객 상세 페이지에서 "활성 세션" 섹션 확인
- [ ] 활성 세션 목록이 표시되는지 확인
- [ ] 세션의 "종료" 버튼 클릭
- [ ] 세션이 목록에서 제거되는지 확인

---

### ✅ 4. 여행 종료 후 1일 사용 제한

#### 4-1. 유예 기간 내 테스트
- [ ] 일반 사용자로 로그인
- [ ] 여행 종료일이 오늘 + 1일 이내인 사용자로 테스트
- [ ] 접근이 허용되는지 확인
- [ ] 재구매 유도 배너가 표시되는지 확인 (남은 시간 표시)

#### 4-2. 유예 기간 종료 테스트
- [ ] 여행 종료일이 2일 이상 지난 사용자로 테스트
- [ ] 접근 제한 모달이 표시되는지 확인
- [ ] "다음 여행 등록하기" 버튼이 작동하는지 확인
- [ ] 온보딩 페이지로 이동하는지 확인

---

### ✅ 5. 재구매 유도 메시지

#### 5-1. 유예 기간 중 배너
- [ ] 유예 기간 중인 사용자로 로그인
- [ ] 채팅 페이지 접속
- [ ] 상단에 노란색/주황색 배너가 표시되는지 확인
- [ ] "남은 시간: 약 X시간" 메시지 확인
- [ ] "다음 여행 등록" 버튼 클릭
- [ ] 온보딩 페이지로 이동하는지 확인

#### 5-2. 유예 기간 종료 배너
- [ ] 유예 기간이 종료된 사용자로 테스트
- [ ] 채팅 페이지 접속
- [ ] 빨간색 배너가 표시되는지 확인
- [ ] "여행이 종료되었습니다" 메시지 확인
- [ ] "다음 여행 등록하기" 버튼 작동 확인

---

## 🔍 테스트 시나리오

### 시나리오 1: 전체 플로우 테스트

1. **관리자 메시지 발송**
   - 관리자 로그인 → 고객 메시지 관리 → 전체 고객 메시지 발송

2. **고객 메시지 확인**
   - 일반 사용자 로그인 → 팝업 메시지 확인 → 확인 처리

3. **고객 관리**
   - 관리자 → 고객 관리 → 상세 보기 → 비밀번호 초기화 → 계정 잠금 테스트

4. **접근 제한 테스트**
   - 유예 기간 종료 사용자 → 접근 제한 모달 확인 → 재구매 유도

---

## ⚠️ 주의사항

1. **기존 기능 영향 확인**
   - 기존 크루즈 가이드 AI 기능이 정상 작동하는지 확인
   - 채팅, 체크리스트, 가계부 등 기존 기능 테스트

2. **에러 확인**
   - 브라우저 콘솔에서 에러가 없는지 확인
   - 네트워크 탭에서 API 요청이 정상인지 확인

3. **데이터베이스 확인**
   - 메시지가 DB에 저장되는지 확인
   - 비밀번호 이벤트가 기록되는지 확인

---

## 🐛 문제 해결

### 문제 1: 메시지가 팝업으로 나타나지 않음
- **확인 사항**:
  - `/api/user/messages` API가 정상 응답하는지 확인
  - 브라우저 콘솔에서 에러 확인
  - 사용자 세션이 유효한지 확인

### 문제 2: 접근 제한이 작동하지 않음
- **확인 사항**:
  - `/api/user/access-check` API가 정상 작동하는지 확인
  - 사용자의 여행 종료일이 올바르게 설정되어 있는지 확인
  - `AccessCheckWrapper` 컴포넌트가 렌더링되는지 확인

### 문제 3: 관리자 권한 오류
- **확인 사항**:
  - 관리자 계정의 `role`이 `'admin'`인지 확인
  - 세션이 유효한지 확인
  - API 엔드포인트의 인증 로직 확인

---

## 📝 테스트 결과 기록

### 테스트 일시: _______________

### 테스트 결과:
- [ ] 모든 기능 정상 작동
- [ ] 일부 기능 오류 발견 (상세 기록: _______________)
- [ ] 기존 기능 영향 있음 (상세 기록: _______________)

### 발견된 문제:
1. _______________
2. _______________
3. _______________

---

**테스트 완료 후 결과를 공유해주시면 문제를 수정하겠습니다!**














