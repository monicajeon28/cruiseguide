# 크루즈 가이드 '지니(Genie)' - 최종 기획서 v3

> **작성일**: 2025년 11월 2일  
> **버전**: 3.0 (현실적 범위 재조정)  
> **목표**: 50대 이상이 실제로 사용 가능한 크루즈 AI 가이드

---

## 🎯 프로젝트 비전

### 핵심 가치
**"통번역과 능동적 알림으로 50대도 안전한 크루즈 여행"**

50대 이상이 언어 장벽 없이, 출항 놓침 없이, 
음성으로 편하게 소통하며 크루즈 여행을 즐기는 AI 동반자

---

## 🎯 핵심 목표 3가지

### 1. 언어 장벽 제거 (통번역 핵심)
- **현재**: 50대는 영어 못함, 일본어/중국어 더 못함
- **지니**: 음성으로 말하면 바로 번역, 사진 찍으면 바로 해석
- **효과**: 언어 스트레스 **0%**

### 2. 능동적 보호 (출항 놓침 0건)
- **현재**: 시간 체크 못해서 배 놓침
- **지니**: AI가 출항 1시간 전 자동 알림 (푸시)
- **효과**: 출항 놓침 **0건**

### 3. 음성 중심 (타이핑 불편 해소)
- **현재**: 작은 글씨, 타이핑 어려움
- **지니**: 말로 질문, 음성으로 답변
- **효과**: 시니어 만족도 **90%+**

---

## 📊 차별화 포인트

### vs 일반 번역 앱
| 항목 | 일반 앱 | 크루즈 지니 |
|------|---------|------------|
| 번역 | 텍스트만 | **음성 + 사진** |
| 대화 | 1회성 | **AI 대화 이력** |
| 알림 | 없음 | **능동적 안전 알림** |
| 환율 | 별도 앱 | **통합** |
| 가계부 | 별도 앱 | **통합** |

### vs 크루즈 회사 앱
| 항목 | 회사 앱 | 크루즈 지니 |
|------|---------|------------|
| 언어 | 영어 | **한국어 + 번역** |
| 대상 | 전 연령 | **50대+ 최적화** |
| 음성 | 없음 | **음성 중심** |
| AI | 없음 | **Gemini 2.5** |
| 알림 | 수동 | **자동 능동적** |

---

## 🏗️ 시스템 아키텍처

### 기술 스택
- **Frontend**: Next.js 14, React 18, TypeScript
- **AI**: Google Gemini 2.5 Flash
- **음성**: Web Speech API (TTS/STT) ✅ 이미 구현됨
- **번역**: Gemini API ✅ 이미 구현됨
- **푸시**: Web Push API (VAPID) ✅ 이미 구현됨
- **Database**: SQLite → PostgreSQL
- **인증**: Iron Session

### 이미 완성된 핵심 기능
1. ✅ **TTS (음성 출력)** - AI 답변 자동 읽어주기
2. ✅ **통번역기** - 음성 인식 + 번역 + 사진 번역
3. ✅ **푸시 알림** - 출항 1시간 전 자동 알림
4. ✅ **Proactive Engine** - 5가지 능동적 트리거
5. ✅ **세계 지도** - 방문 국가 자동 색칠
6. ✅ **가계부 & 체크리스트**

---

## 🎨 사용자 여정 (현실적 버전)

### Phase 1: 여행 시작 (회원가입 & 간소화된 온보딩)

#### 1-1. 회원가입 (30초)
```
1. 로그인 페이지
   ↓
2. 이메일 + 비밀번호 입력 (카카오/네이버 로그인도 가능)
   ↓
3. 완료!
```

#### 1-2. 온보딩 (현실적 버전 - 3개 입력)

**기존 계획 (불가능)**:
```
❌ 예약번호 입력: "MSC-JP4N5D" 
   → API 연동 없어서 불가능
   → 자체 예약 시스템 만들면 일 2배
```

**현실적 방법**:
```
1. 크루즈 선택 (드롭다운)
   - "MSC 벨리시마 - 일본/대만 4박5일"
   - "로얄 캐리비안 스펙트럼 - 일본 규슈 3박4일"
   - "코스타 세레나 - 오키나와/타이완 5박6일"
   ↓
2. 출발 날짜 선택
   - 캘린더에서 날짜 선택
   ↓
3. [여행 시작하기] 클릭
   ↓
✅ 자동 생성:
   - Trip (여행 정보)
   - Itinerary (일정)
   - VisitedCountry (통계)
```

**소요 시간**: **1분** (예약번호 입력보다 오히려 쉬움)

**장점**:
- ✅ API 연동 불필요
- ✅ 사용자가 더 직관적 (상품명이 보임)
- ✅ 자체 DB만으로 가능
- ✅ 관리자가 CMS로 상품 추가 가능 (이미 구현됨)

---

### Phase 2: 여행 중 (핵심 - 번역기 활용)

#### 2-1. 승선일 (Day 1)
```
오전 11시 (승선 3시간 전)
└─ 📱 푸시 알림: "터미널로 이동할 시간입니다!"
   ✅ 이미 구현됨 (Proactive Engine)

오후 2시 (승선)
└─ 채팅: "객실이 어디에요?"
   └─ AI: "객실 번호를 말씀해주시면 위치를 알려드릴게요!"
```

#### 2-2. 기항지 방문 (Day 2 - 후쿠오카) 🔥 번역기 핵심

**시나리오 1: 식당에서**
```
상황: 메뉴판이 일본어
   ↓
1. [번역기] 메뉴 클릭
   ↓
2. [📷 사진 번역] 클릭
   ↓
3. 메뉴판 사진 찍기
   ↓
4. AI가 OCR + 번역
   "라면 (ラーメン) - 라멘
    규동 (牛丼) - 소고기 덮밥
    우동 (うどん) - 우동"
   ↓
5. [🔊 읽어주기] 클릭하면 음성으로 읽어줌
```

**시나리오 2: 점원과 대화**
```
상황: 주문하고 싶은데 말이 안 통함
   ↓
1. [번역기] 메뉴 클릭
   ↓
2. [🎤 한국어 → 일본어] 선택
   ↓
3. "돈까스 주세요" (음성으로 말하기)
   ↓
4. AI가 일본어로 번역 + 음성 출력
   "とんかつをください (톤카츠오 쿠다사이)"
   ↓
5. 스피커 켜서 점원에게 들려주기
```

**시나리오 3: 길 물어보기**
```
1. [번역기] 클릭
   ↓
2. "기차역이 어디에요?" (음성 입력)
   ↓
3. AI가 일본어로 번역
   "駅はどこですか？ (에키와 도코데스카?)"
   ↓
4. 상대방이 일본어로 답변
   ↓
5. [🎤 일본어 → 한국어] 전환
   ↓
6. 상대방 말을 폰에 대고 음성 인식
   ↓
7. AI가 한국어로 번역 + 음성 출력
   "왼쪽으로 200m 가세요"
```

✅ **이 모든 기능이 이미 `/app/translator`에 구현되어 있음!**

#### 2-3. 출항 시간 (핵심 안전 기능)
```
오후 5시 (출항 1시간 전)
└─ 🚨 📱 푸시 알림: "⚠️ 긴급! 출항 1시간 전! 지금 바로 배로 돌아오세요!"
   - requireInteraction: true (확인할 때까지 계속 표시)
   - 진동: [200, 100, 200]
   ✅ 이미 구현됨 (Proactive Engine)
```

**효과**: 출항 놓침 **0건** 보장

---

## 🎯 핵심 기능 상세

### 1. 통번역기 (가장 중요!) 🔥

#### 1-1. 기능 (이미 구현됨 ✅)
```
📱 /app/translator 페이지

기능:
1. 음성 인식 (STT)
   - Web Speech API
   - 한국어 → 일본어, 영어, 중국어 등
   
2. 번역
   - Gemini API
   - 양방향 번역
   
3. 음성 출력 (TTS)
   - 번역된 텍스트 자동 읽어주기
   
4. 사진 번역 (OCR + 번역)
   - 메뉴판, 표지판 사진 찍으면 자동 해석
   - /api/vision 엔드포인트
   
5. 대화 이력
   - 최근 번역 기록 저장
   - 다시 확인 가능
```

#### 1-2. 50대+ 친화적 UI 개선 필요 ⏳

**현재 문제**:
- 버튼이 작을 수 있음
- 언어 선택이 복잡할 수 있음
- 사진 번역 사용법 모를 수 있음

**개선 계획**:
```
1. 큰 버튼 (최소 60x60px)
   - [🎤 말하기] 버튼 크게
   - [📷 사진 찍기] 버튼 크게
   - [🔊 듣기] 버튼 크게

2. 언어 자동 선택
   - 오늘 방문 기항지 기반
   - 일본 → 한국어↔일본어 자동 설정
   - 중국 → 한국어↔중국어 자동 설정

3. 첫 사용 가이드
   - "사진을 찍으면 메뉴를 한국어로 보여드려요!"
   - "말하기 버튼을 누르고 말하면 번역됩니다"
   - 3단계 튜토리얼

4. 빠른 문장
   - "화장실이 어디에요?"
   - "얼마예요?"
   - "이거 주세요"
   - "감사합니다"
   - 자주 쓰는 문장 버튼
```

---

### 2. 능동적 보호자 (Proactive Engine) ✅ 완료

#### 5가지 자동 트리거 (이미 작동 중)

```
1. D-Day 알림 (D-7, D-1, 오전 9시)
   "출발 7일 전! 준비물을 확인하세요"

2. 승선 안내 (승선 3시간 전)
   "터미널로 이동할 시간입니다!"

3. 기항지 도착 (도착 1시간 전)
   "후쿠오카 도착 1시간 전! 여권을 챙기세요"
   → 이때 번역기 알림도 함께!
   "번역기를 켜두시면 더 편해요!"

4. 🚨 귀선 경고 (출항 1시간 전) - 핵심!
   "⚠️ 긴급! 출항 1시간 전! 지금 바로 배로 돌아오세요!"

5. 하선 준비 (하선 1시간 전)
   "하선 준비! 여권 회수하세요"
```

---

### 3. 음성 중심 UI ✅ 완료

#### 3-1. TTS (음성 출력) - 이미 구현됨
```
AI 답변 → 자동 음성 재생
- 속도: 0.9 (자연스럽게)
- 설정: ON/OFF 토글
- [다시 듣기] [중지] 버튼
```

#### 3-2. STT (음성 입력) - 추가 예정 ⏳
```
채팅 입력창:
└─ [🎤 음성 입력] 버튼
    "오늘 날씨 어때?"
    → 텍스트 자동 입력
    → [전송]
```

---

### 4. 가계부 (환율 자동 계산) ✅ 완료

```
상황: 일본에서 라멘 1,500엔 먹음
   ↓
1. [가계부] 메뉴 클릭
   ↓
2. 금액 입력: 1500
   ↓
3. 통화 자동 선택: JPY (오늘 일본 방문 중)
   ↓
4. 카테고리: 식비
   ↓
5. [추가] 클릭
   ↓
✅ 자동 환산:
   - 1,500엔
   - ≈ 13,500원
   - ≈ $10.5
```

**개선 필요**:
- 오늘 방문 국가 통화 자동 선택 (Itinerary 기반)
- 자주 쓰는 카테고리 빠른 버튼

---

### 5. 세계 지도 (방문 기록) ✅ 완료

```
/map 페이지
└─ 방문한 국가 자동 색칠
    - 1회: 파란색
    - 2회: 노란색
    - 3-4회: 주황색
    - 5회+: 빨간색
└─ 국가 클릭 → 방문 기록 모달
```

---

## 🛠️ 개발 로드맵 (현실적)

### Phase 1: 긴급 개선 (1주일) 🔴

#### Day 1: 온보딩 수정
```
작업:
1. SimplifiedOnboarding.tsx 수정
   - 예약번호 입력 삭제 ❌
   - 크루즈 선택 드롭다운 추가 ✅
   - CruiseProduct 목록 불러오기
   
2. UI
   - 큰 드롭다운 (선택 쉽게)
   - 상품명 + 일정 표시
   - 날짜 선택 캘린더

소요: 3시간
난이도: ⭐⭐ (쉬움)
```

#### Day 2: 번역기 UI 개선
```
작업:
1. /app/translator/page.tsx 수정
   - 버튼 크기 증가 (60x60px)
   - 아이콘 + 텍스트
   - 색상 대비 증가
   
2. 언어 자동 선택
   - 오늘 Itinerary 확인
   - 방문 국가 기반 자동 설정
   
3. 빠른 문장 추가
   - "화장실 어디에요?"
   - "얼마예요?"
   - "이거 주세요"
   - "감사합니다"
   - 각 언어별 5-10개

소요: 4시간
난이도: ⭐⭐⭐ (중급)
```

#### Day 3: 번역기 튜토리얼
```
작업:
1. 첫 사용 가이드 모달
   - "사진을 찍으면 메뉴판을 번역해드려요!"
   - "말하기 버튼을 누르고 말하세요"
   - "번역된 내용을 다시 들을 수 있어요"
   
2. 3단계 인터랙티브 튜토리얼
   - Step 1: 사진 찍기 시연
   - Step 2: 음성 입력 시연
   - Step 3: 빠른 문장 사용법

소요: 3시간
난이도: ⭐⭐⭐ (중급)
```

#### Day 4: 채팅 히스토리 로드
```
작업:
1. ChatClientShell.tsx 수정
   - useEffect로 /api/chat/history 호출
   - 기존 messages 배열에 추가
   - 로딩 상태

소요: 3시간
난이도: ⭐⭐ (쉬움)
```

#### Day 5: 에러 메시지 & 테스트
```
작업:
1. 모든 에러 한국어 전환
2. 환율 API 에러 처리
3. 통합 테스트

소요: 4시간
난이도: ⭐⭐ (쉬움)
```

**Phase 1 완료 시**: 출시 가능 **95%** + 번역기 강화

---

### Phase 2: 시니어 친화 기능 (2주) 🟡

#### Week 1: 음성 입력 (STT) & 글씨 크기
```
Day 1-3: STT 구현
- 채팅 입력창에 [🎤 음성 입력] 버튼
- Web Speech API
- 한국어 음성 인식

Day 4-5: 글씨 크기 조절
- 설정 페이지에 "글씨 크기"
- 4단계 (작게/보통/크게/매우 크게)
- CSS 변수로 전체 적용
```

#### Week 2: 고대비 모드 & 가계부 개선
```
Day 1-3: 고대비 모드
- Tailwind 다크 모드
- 설정 페이지 토글
- 전체 컴포넌트 스타일

Day 4-5: 가계부 개선
- 오늘 방문 국가 통화 자동 선택
- Itinerary 기반 로직
- 빠른 입력 버튼
```

---

### Phase 3: 데이터 안정화 (2주) 🟢

#### Week 1-2: LocalStorage → DB 마이그레이션
```
Week 1: 가계부
- /app/wallet/page.tsx
- LocalStorage → /api/expenses
- 마이그레이션 로직

Week 2: 체크리스트
- 동일한 패턴
```

---

### Phase 4: 최종 개선 (1주) 🟢

```
Day 1-2: 로딩 스켈레톤
Day 3-4: Toast 시스템
Day 5: 최종 테스트
```

---

## 🎯 핵심 시나리오 (50대 실사용)

### 시나리오 1: 일본 후쿠오카에서 라멘 먹기 🍜

```
1. 라멘집 발견
   ↓
2. 메뉴판이 일본어... 당황
   ↓
3. [번역기] 메뉴 클릭
   ↓
4. [📷 사진 번역] 클릭
   ↓
5. 메뉴판 사진 찍기
   ↓
6. AI가 자동으로:
   - OCR로 일본어 인식
   - 한국어로 번역
   - 음성으로 읽어주기
   "라멘 (라멘) 900엔
    차슈멘 (차슈멘) 1200엔
    교자 (교자) 300엔"
   ↓
7. 주문할 것 결정
   ↓
8. [🎤 한국어 → 일본어] 선택
   ↓
9. "차슈멘 주세요" (음성으로 말하기)
   ↓
10. AI가 일본어로 번역 + 음성 출력
    "チャーシューメンをください"
    ↓
11. 스피커 켜서 점원에게 들려주기
    ↓
12. 주문 완료!
    ↓
13. 식사 후 [가계부] 클릭
    ↓
14. 1200엔 입력
    - 통화: JPY (자동 선택)
    - 카테고리: 식비
    ↓
15. [추가] 클릭
    - ≈ 10,800원
    - ≈ $8.3
    ↓
✅ 완료!
```

**소요 시간**: 2-3분
**어려움**: 매우 쉬움 (말하고 사진만 찍으면 됨)

---

### 시나리오 2: 출항 시간 놓칠 뻔한 상황 ⚠️

```
오후 4시: 후쿠오카 거리 쇼핑 중
   ↓
오후 5시 (출항 1시간 전)
   ↓
📱 진동! 푸시 알림!
"⚠️ 긴급! 출항 1시간 전!"
"지금 바로 배로 돌아오세요!"
   ↓
알림 클릭
   ↓
채팅 화면 자동 열림
AI: "터미널까지 약 15분 거리입니다. 택시를 타고 서두르세요!"
   ↓
[🎤 음성 입력] 클릭
"택시 어떻게 불러요?"
   ↓
AI: "택시는 일본어로 タクシー(타쿠시)입니다. 
     손을 들면 세워줍니다."
   ↓
택시 타고 터미널 도착
   ↓
✅ 무사히 승선!
```

**효과**: 출항 놓침 **0건**

---

## 📊 성공 지표 (KPI)

### 핵심 지표
- **번역기 사용률**: 80% 이상 (기항지 방문 시)
- **출항 놓침**: 0건
- **시니어 만족도**: 90% 이상
- **음성 기능 사용률**: 70% 이상

### 번역기 특화 지표
- **사진 번역 사용**: 1인당 평균 5회/여행
- **음성 번역 사용**: 1인당 평균 10회/여행
- **빠른 문장 사용**: 1인당 평균 3회/여행

---

## 💰 비용 (현실적)

### 월 예상 비용 (사용자 100명 기준)
```
서버: 50,000원 (Vercel Pro)
AI API: 30,000원 (Gemini API - 번역 + 채팅)
데이터베이스: 20,000원 (PostgreSQL)
총: 100,000원/월
```

### 수익 모델 (나중에)
1. 무료 베이직 (광고)
2. 프리미엄 (월 5,000원)
   - 광고 제거
   - 무제한 번역
   - 음성 품질 업그레이드

---

## ✅ 최종 체크리스트

### Phase 1 (1주일) - 출시 준비
- [ ] 온보딩 크루즈 선택으로 변경 (3시간)
- [ ] 번역기 UI 개선 - 큰 버튼 (4시간)
- [ ] 번역기 튜토리얼 (3시간)
- [ ] 언어 자동 선택 로직 (2시간)
- [ ] 빠른 문장 추가 (2시간)
- [ ] 채팅 히스토리 로드 (3시간)
- [ ] 에러 메시지 한국어 (2시간)
- [ ] 환율 API 에러 처리 (2시간)
- [ ] 통합 테스트 (4시간)

**총 소요**: 25시간 (1주일)

---

## 🎊 결론

### 현재 상태: **85% 완성**

### 주요 변경사항

#### ❌ 제거된 것
1. 예약번호 입력 (API 연동 불가능)
2. ReturnToShipBanner (GPS 기능 - 푸시로 충분)
3. AI Tool Calling (너무 복잡)
4. RAG 시스템 (너무 복잡)

#### ✅ 강화된 것
1. **통번역기** - 가장 중요한 기능으로 부각
2. **50대 친화 UI** - 큰 버튼, 음성 중심
3. **빠른 문장** - 자주 쓰는 말 버튼
4. **언어 자동 선택** - 오늘 방문 국가 기반

#### ⏳ 추가 예정
1. 음성 입력 (STT) - 채팅에도
2. 글씨 크기 조절
3. 고대비 모드
4. 가계부 개선 (자동 통화 선택)

### 핵심 가치
1. ✅ **언어 장벽 제거** - 번역기 핵심
2. ✅ **능동적 보호** - 출항 놓침 0건
3. ✅ **음성 중심** - 타이핑 불필요
4. ✅ **현실 가능** - API 연동 불필요

### 차별화
- vs 번역 앱: **AI 대화 + 능동적 알림**
- vs 회사 앱: **한국어 + 시니어 최적화**
- vs 가이드: **24시간 AI 동반자**

---

**작성자**: 크루즈 지니 팀  
**작성일**: 2025년 11월 2일  
**버전**: 3.0 (현실적 범위 - 번역기 핵심)  
**다음 단계**: Phase 1 착수 (1주일)

🚀 **"말이 통하면 여행이 쉽다 - 크루즈 지니"** 🚀

















