# 📋 고객 상태 시스템 설명서

> **초등학생도 이해할 수 있게 쉽게 설명한 문서입니다** 🎓

## 🎯 고객 상태란?

고객 상태는 크루즈닷 서비스를 이용하는 고객들이 어떤 상태에 있는지 나타내는 것입니다. 마치 학교에서 학생의 상태를 체크하는 것처럼요!

---

## 📌 4가지 고객 상태

### 1️⃣ **활성** (🟢 자유여행 고객)

**이 고객은 누구인가요?**
- 크루즈닷 상품 중 **"자유여행"**을 예약한 고객입니다
- 이름, 연락처, 비밀번호(3800)로 로그인할 수 있습니다

**언제 자동으로 잠금이 되나요?**
- ✈️ **출발일**에 자동으로 잠금 상태가 됩니다

**예시:**
- 홍길동님은 2024년 12월 25일 출발하는 자유여행을 예약했습니다
- → 12월 25일이 되면 자동으로 잠금 상태가 됩니다

---

### 2️⃣ **패키지** (🟡 패키지여행 고객)

**이 고객은 누구인가요?**
- 크루즈닷 상품 중 **"패키지여행"**을 예약한 고객입니다
- 이름, 연락처, 비밀번호(3800)로 로그인할 수 있습니다

**언제 자동으로 잠금이 되나요?**
- ✈️ **여행 종료 후 1일 후**에 자동으로 잠금 상태가 됩니다

**예시:**
- 김철수님은 12월 20일~12월 25일 패키지여행을 예약했습니다
- → 여행이 끝난 후 하루 지난 12월 26일에 자동으로 잠금 상태가 됩니다

---

### 3️⃣ **동면** (🟡 시험 사용 고객)

**이 고객은 누구인가요?**
- 아직 상품을 예약하지 않은 고객입니다
- 상담 후 가입했지만 아직 계약을 하지 않은 상태입니다
- **48시간 동안만** 무료로 사용해볼 수 있습니다

**동면 상태를 판별하는 규칙:**
- 이름 = 연락처 (예: 이름이 "010-1234-5678"로 입력됨)
- 비밀번호 = 연락처 (예: 비밀번호가 "010-1234-5678"로 입력됨)
- 이렇게 로그인한 고객은 **동면 상태**로 간주합니다
- 즉, 이름과 비밀번호가 모두 연락처와 같은 경우를 동면 상태로 체크합니다

**언제 자동으로 잠금이 되나요?**
- ⏰ 가입한 날부터 **48시간(2일) 후**에 자동으로 잠금 상태가 됩니다

**예시:**
- 홍길동님이 이름: "010-1234-5678", 비밀번호: "010-1234-5678"로 가입
- → 이 고객은 **동면 상태**로 분류됩니다
- 12월 1일에 가입한 동면 고객은 12월 3일 자정에 자동으로 잠금 상태가 됩니다

---

### 4️⃣ **잠금** (🔴 사용 불가 고객)

**이 고객은 누구인가요?**
- 현재 로그인할 수 없는 상태입니다
- 관리자가 직접 잠금 처리하거나, 위의 자동 잠금 규칙에 의해 잠금된 고객입니다

**로그인:**
- ❌ 로그인 불가능

---

## 🔄 상태 변경 및 여행 횟수 카운트

### 여행 횟수는 언제 증가하나요?

**규칙:**
1. **잠금 상태에서 → 활성 또는 패키지로 변경**하면 여행 횟수가 1회 증가합니다!
2. **동면 상태에서 → 활성 또는 패키지로 변경**하면 여행 횟수가 1회 증가합니다!
3. **활성 ↔ 패키지 상태 변경**하면 여행 횟수가 1회 증가합니다!

**예시 1: 잠금 → 활성**
1. 홍길동님 상태: **활성** (여행 횟수: 2회)
2. 출발일이 되어서 → **잠금** 상태로 변경
3. 관리자가 → **활성**으로 다시 변경
4. ✅ **여행 횟수: 3회** (1회 증가!)

**예시 2: 잠금 → 패키지**
1. 김철수님 상태: **패키지** (여행 횟수: 1회)
2. 여행 종료 후 1일 지나서 → **잠금** 상태로 변경
3. 관리자가 → **패키지**로 다시 변경
4. ✅ **여행 횟수: 2회** (1회 증가!)

**예시 3: 동면 → 활성**
1. 박영희님 상태: **동면** (여행 횟수: 0회)
2. 관리자가 → **활성**으로 변경
3. ✅ **여행 횟수: 1회** (1회 증가!)

**예시 4: 활성 → 패키지**
1. 최민수님 상태: **활성** (여행 횟수: 2회)
2. 관리자가 → **패키지**로 변경
3. ✅ **여행 횟수: 3회** (1회 증가!)

**예시 5: 패키지 → 활성**
1. 이영희님 상태: **패키지** (여행 횟수: 1회)
2. 관리자가 → **활성**으로 변경
3. ✅ **여행 횟수: 2회** (1회 증가!)

---

## 🎮 관리자가 할 수 있는 것

### 상태 변경 권한

관리자는 **자유롭게** 고객 상태를 변경할 수 있습니다:

- ✅ 활성 ↔ 패키지
- ✅ 활성 ↔ 동면
- ✅ 활성 ↔ 잠금
- ✅ 패키지 ↔ 동면
- ✅ 패키지 ↔ 잠금
- ✅ 동면 ↔ 잠금

**중요:**
- 잠금 상태에서 → 활성 또는 패키지로 변경하면 **자동으로 여행 횟수 +1**
- 동면 상태에서 → 활성 또는 패키지로 변경하면 **자동으로 여행 횟수 +1**
- 활성 ↔ 패키지 상태 변경하면 **자동으로 여행 횟수 +1**
- 동면 ↔ 잠금 상태 변경에는 여행 횟수 변화 없음

---

## 📊 상태별 요약표

| 상태 | 의미 | 자동 잠금 시점 | 여행 횟수 증가 |
|------|------|---------------|---------------|
| 🟢 **활성** | 자유여행 예약 고객 | 출발일 | 잠금→활성, 동면→활성, 패키지→활성 변경 시 |
| 🟡 **패키지** | 패키지여행 예약 고객 | 여행 종료 후 1일 | 잠금→패키지, 동면→패키지, 활성→패키지 변경 시 |
| 🟡 **동면** | 시험 사용 고객 (48시간) | 가입 후 48시간 | 동면→활성/패키지 변경 시 |
| 🔴 **잠금** | 로그인 불가 | - | - |

---

## ⚠️ 주의사항

1. **자동 잠금은 시스템이 자동으로 처리합니다**
   - 활성 고객: 출발일에 자동 잠금
   - 패키지 고객: 여행 종료 후 1일 후 자동 잠금
   - 동면 고객: 가입 후 48시간 후 자동 잠금

2. **여행 횟수는 다음 경우에 증가합니다:**
   - 잠금 → 활성/패키지 변경 시
   - 동면 → 활성/패키지 변경 시
   - 활성 ↔ 패키지 변경 시

3. **관리자는 언제든지 상태를 변경할 수 있습니다**

---

## 💡 실제 사용 예시

### 시나리오 1: 새 고객이 가입했을 때
1. 고객이 가입 → **동면** 상태
2. 48시간 동안 무료로 사용 가능
3. 48시간 후 → 자동으로 **잠금** 상태
4. 관리자가 상담 후 → **활성** 또는 **패키지**로 변경
5. ✅ 여행 횟수: 1회

### 시나리오 2: 자유여행 고객이 여행을 갔을 때
1. 고객이 자유여행 예약 → **활성** 상태
2. 출발일이 되면 → 자동으로 **잠금** 상태
3. 다음 여행을 예약하면 → 관리자가 **활성**으로 변경
4. ✅ 여행 횟수: 1회 증가

### 시나리오 3: 패키지여행 고객이 여행을 마쳤을 때
1. 고객이 패키지여행 예약 → **패키지** 상태
2. 여행 종료 후 1일 후 → 자동으로 **잠금** 상태
3. 다음 여행을 예약하면 → 관리자가 **패키지**로 변경
4. ✅ 여행 횟수: 1회 증가

---

## ❓ 자주 묻는 질문

**Q: 동면에서 직접 활성으로 변경하면 여행 횟수가 증가하나요?**
A: 네! 동면에서 활성/패키지로 변경하면 여행 횟수가 1회 증가합니다.

**Q: 활성에서 패키지로 바꾸면 여행 횟수가 증가하나요?**
A: 네! 활성 ↔ 패키지 상태 변경 시에도 여행 횟수가 1회 증가합니다.

**Q: 동면 고객은 어떻게 구분하나요?**
A: 이름과 비밀번호가 모두 연락처와 같은 경우를 동면 상태로 판별합니다. 예: 이름="010-1234-5678", 비밀번호="010-1234-5678"

**Q: 관리자가 실수로 잘못 변경하면?**
A: 다시 원하는 상태로 변경하면 됩니다. 다만 여행 횟수는 활성/패키지 상태로 변경할 때마다 증가하므로 신중하게 변경해야 합니다.

